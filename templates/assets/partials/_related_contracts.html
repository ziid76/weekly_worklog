<div class="bg-white rounded-md border border-slate-200 shadow-sm overflow-hidden mb-6">
    <div class="px-6 py-4 bg-slate-50/50 border-b border-slate-200 flex justify-between items-center">
        <h2 class="text-sm font-bold text-slate-900 flex items-center gap-2">
            <span class="material-symbols-outlined text-slate-400 text-[20px]">description</span>
            연관 계약
        </h2>
        {% if title_action_url %}
        <a href="{{ title_action_url }}" class="text-primary hover:underline text-xs font-bold">{{ title_action_text|default:"계약 등록" }}</a>
        {% endif %}
    </div>
    <div class="overflow-x-auto">
        <table class="w-full text-left border-collapse">
            <thead class="bg-slate-50/50 text-slate-500 text-xs uppercase font-bold tracking-wider border-b border-slate-200">
                <tr>
                    <th class="px-6 py-3">계약명</th>
                    <th class="px-6 py-3 text-center">유형</th>
                    <th class="px-6 py-3 text-center">업체</th>
                    {% if show_systems %}
                    <th class="px-6 py-3 text-center">관련시스템</th>
                    {% endif %}
                    <th class="px-6 py-3 text-center">기간</th>
                    {% if show_amount %}
                    <th class="px-6 py-3 text-right">금액</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-100 text-sm text-slate-700">
                {% for contract in contracts %}
                <tr class="hover:bg-slate-50/50 transition-colors group cursor-pointer" onclick="window.location='{% url 'assets:contract_detail' contract.pk %}'">
                    <td class="px-6 py-3">
                        <span class="font-bold text-slate-900 group-hover:text-primary transition-colors underline decoration-slate-200 underline-offset-4">{{ contract.name }}</span>
                    </td>
                    <td class="px-6 py-3 text-center">
                        <span class="inline-flex px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 text-slate-600">{{ contract.get_contract_type_display }}</span>
                    </td>
                    <td class="px-6 py-3 text-center">{{ contract.contractor }}</td>
                    {% if show_systems %}
                    <td class="px-6 py-3 text-center">
                        <div class="flex flex-wrap justify-center gap-1">
                            {% for system in contract.systems.all %}
                                <span class="px-1.5 py-0.5 rounded bg-blue-50 text-[10px] font-bold text-blue-600 border border-blue-100">{{ system.name }}</span>
                            {% empty %}
                                <span class="text-slate-300 text-xs">-</span>
                            {% endfor %}
                        </div>
                    </td>
                    {% endif %}
                    <td class="px-6 py-3 text-center text-xs font-mono text-slate-500">
                        {{ contract.start_date|date:"Y-m-d" }} ~ {{ contract.end_date|date:"Y-m-d" }}
                    </td>
                    {% if show_amount %}
                    {% load humanize %}
                    <td class="px-6 py-3 text-right font-bold text-slate-900 whitespace-nowrap">{{ contract.amount|intcomma }}원</td>
                    {% endif %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="{% if show_systems and show_amount %}6{% elif show_systems or show_amount %}5{% else %}4{% endif %}" class="px-6 py-12 text-center text-slate-400 font-medium">
                        <div class="flex flex-col items-center gap-2">
                            <span class="material-symbols-outlined text-3xl text-slate-300">description</span>
                            <p>연관된 계약 정보가 없습니다.</p>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
