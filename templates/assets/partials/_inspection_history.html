

    <!-- Inspection Tab Content -->
    <div id="inspection-content" class="tab-pane hidden flex flex-col gap-8">
        <div class="bg-white rounded-md border border-slate-200 shadow-sm overflow-hidden p-6">
            <div class="px-0 py-4 border-b border-slate-100 bg-white flex justify-between items-center mb-6">
                <h3 class="font-bold text-slate-900">점검 이력</h3>
                <button type="button" onclick="openInspectionModal()" class="flex items-center gap-2 px-4 py-2 rounded-full bg-primary text-white hover:bg-primary/90 transition-all font-bold text-xs shadow-lg shadow-primary/20">
                    <span class="material-symbols-outlined text-white text-sm">add</span>
                    점검 등록
                </button>
            </div>
            <div class="overflow-x-auto">
                <table id="inspectionTable" class="w-full text-left border-collapse">
                    <thead class="bg-slate-50/50 text-slate-500 text-sm uppercase font-bold tracking-wider border-b border-slate-100">
                        <tr>
                            <th class="px-6 py-3">점검월</th>
                            <th class="px-6 py-3 text-center text-xs">점검일자</th>
                            <th class="px-6 py-3 text-center text-xs">시스템</th>
                            <th class="px-6 py-3 text-xs">점검결과</th>
                            <th class="px-6 py-3 text-center text-xs">첨부파일</th>
                            <th class="px-6 py-3 text-center text-xs">등록일</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-50 text-sm text-slate-700">
                        {% for inspection in inspections %}
                        <tr class="hover:bg-slate-50/50 transition-colors">
                            <td class="px-6 py-4 font-mono text-xs">{{ inspection.inspection_month }}</td>
                            <td class="px-6 py-4 text-center text-xs" data-order="{{ inspection.inspection_date|date:'Ymd' }}">{{ inspection.inspection_date|date:"Y-m-d" }}</td>
                            <td class="px-6 py-4 text-center text-xs underline decoration-slate-200 underline-offset-4 hover:text-primary transition-colors">
                                <a href="{% url 'assets:system_detail' inspection.system.pk %}">{{ inspection.system.name }}</a>
                            </td>
                            <td class="px-6 py-4 max-w-xs truncate" title="{{ inspection.result }}">{{ inspection.result }}</td>
                            <td class="px-6 py-4 text-center">
                                {% if inspection.attachments.exists %}
                                    <div class="flex flex-wrap justify-start gap-1">
                                    {% for attachment in inspection.attachments.all %}
                                        <a href="{{ attachment.file.url }}" target="_blank" class="p-1.5 rounded-lg bg-slate-50 text-xs text-slate-400 hover:text-primary hover:bg-blue-50 transition-all" title="{{ attachment.filename }}">
                                            <span class="material-symbols-outlined text-sm">description</span> {{ attachment.filename|truncatechars:20 }}
                                        </a>
                                    {% endfor %}
                                    </div>
                                {% else %}
                                    -
                                {% endif %}
                            </td>
                            <td class="px-6 py-4 text-center text-[10px] text-slate-400" data-order="{{ inspection.created_at|date:'U' }}">{{ inspection.created_at|date:"Y-m-d" }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <style>
        #inspectionTable_wrapper .dataTables_length select {
            @apply bg-slate-50 border-slate-200 rounded-lg text-xs font-bold text-slate-600 focus:ring-0 focus:border-primary px-3 py-1 mr-2;
        }
        #inspectionTable_wrapper .dataTables_filter input {
            @apply bg-slate-50 border-slate-200 rounded-lg text-xs font-bold text-slate-600 focus:ring-0 focus:border-primary px-4 py-1.5 ml-2 w-48 transition-all h-8;
        }
        #inspectionTable_wrapper .dataTables_info {
            @apply text-[11px] font-bold text-slate-400 mt-4;
        }
        #inspectionTable_wrapper .dataTables_paginate {
            @apply mt-4 flex items-center gap-1;
        }
        #inspectionTable_wrapper .dataTables_paginate .paginate_button {
            @apply px-3 py-1.5 rounded-lg border border-slate-200 text-xs font-bold text-slate-600 hover:bg-slate-50 cursor-pointer transition-all bg-white !important;
        }
        #inspectionTable_wrapper .dataTables_paginate .paginate_button.current {
            @apply bg-primary text-white border-primary hover:bg-primary/90 !important;
        }
        #inspectionTable_wrapper .dataTables_paginate .paginate_button.disabled {
            @apply opacity-50 cursor-not-allowed !important;
        }
        .dataTables_empty {
            @apply py-12 text-center text-slate-400 font-medium !important;
        }
        #inspectionTable thead th.sorting::after, #inspectionTable thead th.sorting::before,
        #inspectionTable thead th.sorting_asc::after, #inspectionTable thead th.sorting_asc::before,
        #inspectionTable thead th.sorting_desc::after, #inspectionTable thead th.sorting_desc::before {
            @apply opacity-20 scale-75;
        }
    </style>

 
   <script>
        $(document).ready(function() {
            if ($.fn.DataTable.isDataTable('#inspectionTable')) {
                $('#inspectionTable').DataTable().destroy();
            }
            
            $('#inspectionTable').DataTable({
                language: {
                    search: "",
                    searchPlaceholder: "점검 내역 검색...",
                    lengthMenu: "_MENU_",
                    info: "총 _TOTAL_개의 점검 중 _START_-_END_ 표시",
                    infoEmpty: "점검 내역이 없습니다.",
                    infoFiltered: "(전체 _MAX_개 중 필터링됨)",
                    paginate: {
                        first: "처음",
                        last: "마지막",
                        next: '<span class="material-symbols-outlined text-sm">chevron_right</span>',
                        previous: '<span class="material-symbols-outlined text-sm">chevron_left</span>'
                    },
                    zeroRecords: "검색 결과가 없습니다."
                },
                pageLength: 10,
                lengthMenu: [10, 25, 50, 100],
                order: [[1, 'desc']], // Sort by inspection date descending
                columnDefs: [
                    { orderable: false, targets: [3, 4] } // Result and Attachments not sortable
                ],
                dom: '<"flex items-center justify-between mb-4"lf>t<"flex items-center justify-between"ip>',
            });
        });
    </script>